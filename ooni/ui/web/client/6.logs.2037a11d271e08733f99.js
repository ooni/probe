webpackJsonp([6],{561:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadOlder=t.loadLatest=t.loadingLogsSucceeded=t.loadingLogs=t.LOADING_LOGS_FAILED=t.LOADING_LOGS_SUCCEEDED=t.LOADING_LOGS=t.UPLOADING_LOGS_FAILED=t.UPLOADING_LOGS_SUCCEEDED=t.UPLOADING_LOGS=void 0;var l=a(52),n=(t.UPLOADING_LOGS="UPLOADING_LOGS",t.UPLOADING_LOGS_SUCCEEDED="UPLOADING_LOGS_SUCCEEDED",t.UPLOADING_LOGS_FAILED="UPLOADING_LOGS_FAILED",t.LOADING_LOGS="LOADING_LOGS"),o=t.LOADING_LOGS_SUCCEEDED="LOADING_LOGS_SUCCEEDED",r=(t.LOADING_LOGS_FAILED="LOADING_LOGS_FAILED",t.loadingLogs=function(){return{type:n}}),s=t.loadingLogsSucceeded=function(e){return{type:o,latest:e.latest,older:e.older}};t.loadLatest=function(){return function(e,t){return e(r()),(0,l.fetch)("/api/logs").then(function(e){return e.json()}).then(function(t){e(s(t))})["catch"](function(e){console.log(e)})}},t.loadOlder=function(){return function(e,t){return e(r()),(0,l.fetch)("/api/logs?all=true").then(function(e){return e.json()}).then(function(t){e(s(t))})["catch"](function(e){console.log(e)})}}},836:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(564),o=l(n),r=a(54),s=l(r),u=a(32),d=l(u),i=a(48),c=l(i),f=a(39),g=l(f),h=a(38),L=l(h),D=a(2),O=l(D),_=a(11),p=a(707),E=l(p);a(978);var m=function(e){function t(e){(0,d["default"])(this,t);var a=(0,g["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e));return a.state={logData:e.logData,sharing:!1,shareUrl:null},a.onShare=a.onShare.bind(a),a.handleChange=a.handleChange.bind(a),a}return(0,L["default"])(t,e),(0,c["default"])(t,[{key:"handleChange",value:function(e){this.setState({logData:e.target.value})}},{key:"onShare",value:function(){var e=this;this.setState({sharing:!0}),(0,E["default"])("https://api.github.com/gists",{method:"POST",headers:{"Content-Type":"application/json"},body:(0,o["default"])({description:"ooniprobe logs "+new Date,"public":!1,files:{"ooniprobe-logs.txt":{content:this.state.logData}}})}).then(function(e){return e.json()}).then(function(t){e.setState({sharing:!1,shareUrl:t.html_url})})["catch"](function(t){e.setState({sharing:!1})}),event.preventDefault()}},{key:"componentWillReceiveProps",value:function(e){e.logData!==this.props.logData&&this.setState({logData:e.logData})}},{key:"render",value:function(){return O["default"].createElement("div",{className:"log-container"},O["default"].createElement("div",{className:"row"},O["default"].createElement("div",{className:"col-md-12"},O["default"].createElement("textarea",{className:"logarea",value:this.state.logData,onChange:this.handleChange}))),this.state.shareUrl&&O["default"].createElement("div",{className:"row"},O["default"].createElement("div",{className:"col-xs-8"},O["default"].createElement(_.FormattedMessage,{id:"logs.shareUrl",defaultMessage:"Share URL: {urlHref}",values:{urlHref:O["default"].createElement("a",{href:this.state.shareUrl},this.state.shareUrl)}}))),O["default"].createElement("div",{className:"row"},this.state.sharing?O["default"].createElement("div",{className:"col-xs-3"},O["default"].createElement(_.FormattedMessage,{id:"logs.uploading",defaultMessage:"{iconUploading} uploading",values:{iconUploading:O["default"].createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw"})}})):O["default"].createElement("div",{className:"col-xs-3"},O["default"].createElement("button",{className:"btn btn-secondary",onClick:this.onShare},O["default"].createElement(_.FormattedMessage,{id:"logs.shareButton",defaultMessage:"{iconShare} share",values:{iconShare:O["default"].createElement("i",{className:"fa fa-share-square-o"})}})))))}}]),t}(O["default"].Component);m.propTypes={logData:O["default"].PropTypes.string};var S=function(e){var t=e.olderLogs,a=e.latestLog,l=e.loadOlderLogs;return O["default"].createElement("div",null,O["default"].createElement(m,{logData:a}),O["default"].createElement("div",{className:"row"},O["default"].createElement("div",{className:"col-xs-8"},O["default"].createElement("button",{className:"btn btn-secondary",onClick:l},O["default"].createElement(_.FormattedMessage,{id:"logs.loadOlder",defaultMessage:"load older logs"})))),t.map(function(e){return O["default"].createElement(m,{logData:e})}))};S.propTypes={latestLog:O["default"].PropTypes.string,olderLogs:O["default"].PropTypes.array,loadOlderLogs:O["default"].PropTypes.func},t["default"]=S},837:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(30),o=a(836),r=l(o),s=a(561),u=function(e){return{loadOlderLogs:function(){e((0,s.loadOlder)())}}},d=function(e){return{latestLog:e.logs.latest,olderLogs:e.logs.older}};t["default"]=(0,n.connect)(d,u)(r["default"])},839:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],a=c[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var o,r=a(49),s=l(r),u=a(12),d=l(u);t.logsReducer=n;var i=a(561),c=(o={},(0,s["default"])(o,i.UPLOADING_LOGS,function(e){return(0,d["default"])({},e,{uploading:!0})}),(0,s["default"])(o,i.LOADING_LOGS,function(e){return(0,d["default"])({},e,{loading:!0})}),(0,s["default"])(o,i.LOADING_LOGS_SUCCEEDED,function(e,t){return(0,d["default"])({},e,{loading:!1,latest:t.latest,older:t.older})}),o),f={loading:!1,uploading:!1,latest:"",older:[]}},978:973});